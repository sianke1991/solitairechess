"use strict";/*@author sianke1991*/class InvalidMoveType{constructor(e,t,r){this._ordinal=e,this._name=t,this._message=r}get ordinal(){return this._ordinal}get name(){return this._name}get message(){return this._message}static values(){return[InvalidMoveType.MOVE_VOID_PIECE_NOT_ALLOWED,InvalidMoveType.MOVE_WITHOUT_CAPTURES_NOT_ALLOWED,InvalidMoveType.MOVE_WITH_CAPTURES_NOT_ALLOWED,InvalidMoveType.INCOMPATABLE_WITH_PIECE,InvalidMoveType.JUMP_PIECES_NOT_ALLOWED,InvalidMoveType.KING_CANNOT_BE_CAPTURED,InvalidMoveType.REVERSED_PAWN_CANNOT_CAPTURE,InvalidMoveType.PAWN_CANNOT_GENERATE]}toString(){return this.name}equals(e){return null!==e&&this.ordinal===e.ordinal}}InvalidMoveType.MOVE_VOID_PIECE_NOT_ALLOWED=new InvalidMoveType(0,"MOVE_VOID_PIECE_NOT_ALLOWED",""),InvalidMoveType.MOVE_WITHOUT_CAPTURES_NOT_ALLOWED=new InvalidMoveType(1,"MOVE_WITHOUT_CAPTURES_NOT_ALLOWED","다른 기물을 잡지 않고 이동할 수 없습니다."),InvalidMoveType.MOVE_WITH_CAPTURES_NOT_ALLOWED=new InvalidMoveType(2,"MOVE_WITH_CAPTURES_NOT_ALLOWED",""),InvalidMoveType.INCOMPATABLE_WITH_PIECE=new InvalidMoveType(3,"INCOMPATABLE_WITH_PIECE","선택한 기물에 허용되지 않은 움직임입니다."),InvalidMoveType.JUMP_PIECES_NOT_ALLOWED=new InvalidMoveType(4,"JUMP_PIECES_NOT_ALLOWED","다른 기물을 뛰어넘어 이동할 수 없습니다."),InvalidMoveType.KING_CANNOT_BE_CAPTURED=new InvalidMoveType(5,"KING_CANNOT_BE_CAPTURED","기물 킹은 잡을 수 없습니다."),InvalidMoveType.REVERSED_PAWN_CANNOT_CAPTURE=new InvalidMoveType(6,"REVERSED_PAWN_CANNOT_CAPTURE",""),InvalidMoveType.PAWN_CANNOT_GENERATE=new InvalidMoveType(7,"PAWN_CANNOT_GENERATE","");class Move{constructor(e,t){if(e.equals(t))throw new Error("Two Square arguments must be different each other.");this._from=e,this._to=t;var r=e.directionFor(t);if(null===r)throw new Error("The movement between two Square arguments is not valid.");this._direction=r,this._isRanged=!e.isNextTo(t)}get from(){return this._from}get to(){return this._to}get direction(){return this._direction}get isRanged(){return this._isRanged}isValidFor(e){return e.directions.includes(this.direction)&&(e.isRanged||!this.isRanged)}passingSquares(){return this.from.passingSquaresFor(this.to)}flippedMove(){var e=Move.of(this.to,this.from);return 0===e.length?null:e[0]}equals(e){return null!==e&&this.from===e.from&&this.to===e.to}toString(){return Move._toString(this.from,this.to)}static _toString(e,t){return void 0===t?e.toString():Move._toString(e)+"-"+Move._toString(t)}static _reset(){if(0===Move._entireMap.size){Move._entireMap=new Map;for(var e of Square.values())for(var t of Square.values())try{var r=new Move(e,t);Move._entireMap.set(r.toString(),r)}catch(e){}}}static fromString(e){Move._reset();e=Move._entireMap.get(e);return void 0===e?null:e}static of(e,t){if(Move._reset(),void 0!==t)return void 0===(t=Move._entireMap.get(Move._toString(e,t)))?[]:[t];var r,i=Move._toString(e),o=[];for(r of Move._entireMap)r[0].startsWith(i)&&o.push(r[1]);return o}}Move._entireMap=new Map;class MoveHistory{constructor(e){this._moveStack=void 0===e?[]:[...e]}size(){return this._moveStack.length}isEmpty(){return 0===this.size()}clear(){return clearArray(this._moveStack),this}pop(){return this._moveStack.pop(),this}push(e){return this._moveStack.push(e),this}recentMove(){var e=this.size();return 0===e?null:this._moveStack[e-1]}moveAt(e){var t=this.size();return!Number.isInteger(e)||t<=e||e<0?null:this._moveStack[e]}clone(){return new MoveHistory(this._moveStack)}toString(){return this._moveStack.toString()}toMessageLeft(){var t;let r="";for(let e=0;e<Math.min(this.size(),8);e++)r+=(null==(t=this.moveAt(e))?void 0:t.toString())+"\n";return r}toMessageRight(){var t;let r="";for(let e=8;e<this.size();e++)r+=(null==(t=this.moveAt(e))?void 0:t.toString())+"\n";return r}}