"use strict";/*@author sianke1991*/class Piece{constructor(e,i,t,c,r,n,s){this._ordinal=e,this._name=i,this._abbreviation=t,this._numPieces=c,this._isRanged=r,this._message=n,this._directions=s}get ordinal(){return this._ordinal}get name(){return this._name}get abbreviation(){return this._abbreviation}get numPieces(){return this._numPieces}get isRanged(){return this._isRanged}get message(){return this._message}get directions(){return[...this._directions]}static values(){return[Piece.KING,Piece.QUEEN,Piece.ROOK,Piece.BISHOP,Piece.KNIGHT,Piece.PAWN,Piece.REVERSED_PAWN]}static valueOf(e){switch(e){case Piece.KING.name:return Piece.KING;case Piece.QUEEN.name:return Piece.QUEEN;case Piece.ROOK.name:return Piece.ROOK;case Piece.BISHOP.name:return Piece.BISHOP;case Piece.KNIGHT.name:return Piece.KNIGHT;case Piece.PAWN.name:return Piece.PAWN;case Piece.REVERSED_PAWN.name:return Piece.REVERSED_PAWN;default:return null}}toString(){return this.name}equals(e){return null!==e&&this.ordinal===e.ordinal}notEquals(e){return!this.equals(e)}static get VOID_PIECE_ABBREVIATION(){return Piece._VOID_PIECE_ABBREVIATION}static fromAbbreviation(e){switch(e){case Piece.KING.abbreviation:return Piece.KING;case Piece.QUEEN.abbreviation:return Piece.QUEEN;case Piece.ROOK.abbreviation:return Piece.ROOK;case Piece.BISHOP.abbreviation:return Piece.BISHOP;case Piece.KNIGHT.abbreviation:return Piece.KNIGHT;case Piece.PAWN.abbreviation:return Piece.PAWN;case Piece.REVERSED_PAWN.abbreviation:return Piece.REVERSED_PAWN;default:return null}}}Piece.KING=new Piece(0,"KING","K",1,!1,"♔",[Direction.DIRECTION0,Direction.DIRECTION2,Direction.DIRECTION4,Direction.DIRECTION6,Direction.DIRECTION8,Direction.DIRECTION10,Direction.DIRECTION12,Direction.DIRECTION14]),Piece.QUEEN=new Piece(1,"QUEEN","Q",1,!0,"♕",[Direction.DIRECTION0,Direction.DIRECTION2,Direction.DIRECTION4,Direction.DIRECTION6,Direction.DIRECTION8,Direction.DIRECTION10,Direction.DIRECTION12,Direction.DIRECTION14]),Piece.ROOK=new Piece(2,"ROOK","R",2,!0,"♖",[Direction.DIRECTION0,Direction.DIRECTION4,Direction.DIRECTION8,Direction.DIRECTION12]),Piece.BISHOP=new Piece(3,"BISHOP","B",2,!0,"♗",[Direction.DIRECTION2,Direction.DIRECTION6,Direction.DIRECTION10,Direction.DIRECTION14]),Piece.KNIGHT=new Piece(4,"KNIGHT","N",2,!1,"♘",[Direction.DIRECTION1,Direction.DIRECTION3,Direction.DIRECTION5,Direction.DIRECTION7,Direction.DIRECTION9,Direction.DIRECTION11,Direction.DIRECTION13,Direction.DIRECTION15]),Piece.PAWN=new Piece(5,"PAWN","P",0,!1,"♙",[Direction.DIRECTION2,Direction.DIRECTION14]),Piece.REVERSED_PAWN=new Piece(6,"REVERSED_PAWN","E",2,!1,"Ｘ",[Direction.DIRECTION6,Direction.DIRECTION10]),Piece._VOID_PIECE_ABBREVIATION="O";class PieceDeck{constructor(e){this._pieceList=[];for(var i of Piece.values())for(let e=0;e<i.numPieces;e++)this._pieceList.push(i);var t;if(shuffleArray(this._pieceList),KingCapturable.KING_CANNOT_BE_CAPTURED.equals(e.kingCapturable)&&(e=randomIntegerBetweenZeroAnd(4),t=this._pieceList.indexOf(Piece.KING),0!==e?removeElementAt(t,this._pieceList):this._swapPieceList(0,t)),Piece.REVERSED_PAWN.equals(this._pieceList[0])){let e=this._pieceList.length;for(;0<e&&(e--,!Piece.REVERSED_PAWN.notEquals(this._pieceList[e])););this._swapPieceList(0,e)}}_swapPieceList(e,i){return[this._pieceList[e],this._pieceList[i]]=[this._pieceList[i],this._pieceList[e]],this}size(){return this._pieceList.length}isEmpty(){return 0===this.size()}pickOneFor(e){if(!this.isEmpty()){if(0!==e.rowNum||0===e.rowNum&&Piece.REVERSED_PAWN.notEquals(this._pieceList[0]))return e=this._pieceList[0],removeElementAt(0,this._pieceList),e;for(let e=0;e<this.size();e++){var i=this._pieceList[e];if(Piece.REVERSED_PAWN.notEquals(i))return removeElementAt(e,this._pieceList),i}}return null}pickOne(){var e;return this.isEmpty()?null:(e=this._pieceList[0],removeElementAt(0,this._pieceList),e)}}